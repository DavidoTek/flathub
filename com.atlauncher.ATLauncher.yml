app-id: com.atlauncher.ATLauncher
runtime: org.freedesktop.Platform
runtime-version: '19.08'
#runtime: org.gnome.Platform
#runtime-version: '3.38'
sdk: org.freedesktop.Sdk
#sdk: org.gnome.Sdk
sdk-extension: org.freedesktop.Sdk.Extension.openjdk8
command: com.atlauncher.ATLauncher
finish-args:
  - --env=PATH=/app/jre/bin:/usr/bin:/app/bin
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --socket=fallback-x11
  - --device=dri
  - --socket=pulseaudio
  - --share=network
modules:
  - name: openjdk
    buildsystem: simple
    build-commands:
      - /usr/lib/sdk/openjdk8/install.sh
  - name: atlauncher
    buildsystem: simple
    build-commands:
      - install -D ATLauncher-3.4.2.3.jar /app/bin/ATLauncher.jar
      - unzip -p /app/bin/ATLauncher.jar assets/image/Icon.png > ./Icon.png
      - install -D ./Icon.png /app/share/icons/hicolor/256x256/apps/com.atlauncher.ATLauncher.png
      - rm ./Icon.png
    sources:
      - type: file
        url: https://github.com/ATLauncher/ATLauncher/releases/download/3.4.2.3/ATLauncher-3.4.2.3.jar
        sha256: 5f0e0fc22b07c16d5f9954f1d852c4ab47190eaeb0b8e3102e82735bf3c692f6
  - name: atlauncher-startup
    buildsystem: simple
    build-commands:
      - install -D atlauncher /app/bin/com.atlauncher.ATLauncher
      - install -D com.atlauncher.ATLauncher.desktop /app/share/applications/com.atlauncher.ATLauncher.desktop
      - install -D com.atlauncher.ATLauncher.appdata.xml /app/share/metainfo/com.atlauncher.ATLauncher.metainfo.xml
    sources:
      - type: file
        path: atlauncher
      - type: file
        path: com.atlauncher.ATLauncher.desktop
      - type: file
        path: com.atlauncher.ATLauncher.appdata.xml
